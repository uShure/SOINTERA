#!/bin/bash

# ะกะบัะธะฟั ะดะปั ะฟัะพะฒะตัะบะธ ัะฒะตะดะพะผะปะตะฝะธะน ะผะตะฝะตะดะถะตัั
# ะัะฟะพะปัะทะพะฒะฐะฝะธะต: bash check-manager-notifications.sh

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "  ะัะพะฒะตัะบะฐ ัะฒะตะดะพะผะปะตะฝะธะน ะผะตะฝะตะดะถะตัั"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""

# ะัะพะฒะตััะตะผ ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั
echo "๐ ะัะพะฒะตััั ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั..."
if [ -z "$MANAGER_USERNAME" ]; then
    echo "โ MANAGER_USERNAME ะฝะต ัััะฐะฝะพะฒะปะตะฝ"
    echo "ะะพะฑะฐะฒััะต ะฒ .env.local: MANAGER_USERNAME=natalylini"
else
    echo "โ MANAGER_USERNAME: $MANAGER_USERNAME"
fi

if [ -z "$TELEGRAM_BOT_TOKEN" ]; then
    echo "โ TELEGRAM_BOT_TOKEN ะฝะต ัััะฐะฝะพะฒะปะตะฝ"
else
    echo "โ TELEGRAM_BOT_TOKEN: ${TELEGRAM_BOT_TOKEN:0:20}..."
fi

echo ""

# ะัะพะฒะตััะตะผ ะปะพะณะธ ะฑะพัะฐ
echo "๐ ะะพัะปะตะดะฝะธะต ะปะพะณะธ ะฑะพัะฐ (ัะฒะตะดะพะผะปะตะฝะธั ะผะตะฝะตะดะถะตัั):"
journalctl -u sointera-bot -n 50 | grep -E "(ะผะตะฝะตะดะถะตั|ัะฒะตะดะพะผะปะตะฝ|ะทะฐะฟัะพั ะผะตะฝะตะดะถะตัั)" || echo "ะะตั ะปะพะณะพะฒ ะพะฑ ัะฒะตะดะพะผะปะตะฝะธัั ะผะตะฝะตะดะถะตัั"

echo ""

# ะัะพะฒะตััะตะผ ะฑะฐะทั ะดะฐะฝะฝัั
echo "๐๏ธ ะะฐะฟัะพัั ะผะตะฝะตะดะถะตัั ะฒ ะฑะฐะทะต ะดะฐะฝะฝัั:"
cd /var/www/sointera-bot
npx prisma studio --port 5555 &
echo "Prisma Studio ะทะฐะฟััะตะฝ ะฝะฐ ะฟะพััั 5555"
echo "ะัะบัะพะนัะต http://localhost:5555 ะฒ ะฑัะฐัะทะตัะต ะดะปั ะฟัะพัะผะพััะฐ ะฑะฐะทั ะดะฐะฝะฝัั"

echo ""
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "ะะปั ะพััะฐะฝะพะฒะบะธ Prisma Studio: pkill -f 'prisma studio'"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
